<!DOCTYPE html>
<meta charset="utf-8">

<style>

.arc text {
  font: 15px sans-serif;
  text-anchor: middle;
}

.arc path {
  stroke: #fff;
}

</style>

<head>
</head>

<body>
<script src="//d3js.org/d3.v3.min.js"></script>

<script>

var dataset = d3.csv("data.csv", function(data) {
  console.log(data[0]);
});

dataBySpeciality = d3.nest()
  						 .key(function(d) { return d.Speciality; })
  						 .rollup(function(v) {return v.length; })
  						 .entries(dataset.data);

var pie = d3.layout.pie();

var color = d3.scale.category10();

var w = 600;
var h = 600;

var outerRadius = 150;
var innerRadius = 0;

var arc = d3.svg.arc()
				.innerRadius(innerRadius)
				.outerRadius(outerRadius);

var largeArc = d3.svg.arc()
				 .innerRadius(100)
				 .outerRadius(outerRadius);

var svg = d3.select("body")
			.append("svg")
			.attr("width", w)
			.attr("height", h);

var arcs = svg.selectAll("g.arc") 
			.data(pie(dataBySpeciality))
            .enter()
            .append("g")
            .attr("class", "arc")
            .attr("transform", "translate(" + outerRadius + ", " + outerRadius + ")")
            .on("click",changeArc);

arcs.append("path")
	.attr("fill", function(d,i) {
		return color(i);
	})
	.attr("d", arc);

arcs.append("text") 
	.attr("transform", function(d) {
		return "translate(" + arc.centroid(d) + ")"; 
	})
	.attr("text-anchor", "middle") 
	.text(function(d) {
		return d.value; 
	});

function changeArc() {
		svg.selectAll("path")
	 	  .transition()
	 	  .attr('d', largeArc);
}

alert(dataBySpeciality);

</script>
</body>